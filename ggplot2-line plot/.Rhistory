geom_circle(aes(x0 = 0, y0 = 0, r = 1), color = "blue") +
ggtitle("Monte Carlo Simulation for Estimating Pi") +
theme_minimal()
return(pi_estimate)
}
# 设置随机点的数量
num_points <- 100000
# 计算π的近似值
pi_estimate <- monte_carlo_pi(num_points)
# 绘制散点图
library(ggplot2)
ggplot(data, aes(x, y, color = in_circle)) +
geom_point() +
geom_circle(aes(x0 = 0, y0 = 0, r = 1), color = "blue") +
ggtitle("Monte Carlo Simulation for Estimating Pi") +
theme_minimal()
# 定义函数，计算圆周率π
monte_carlo_pi <- function(num_points) {
# 生成随机点
x <- runif(num_points, min = -1, max = 1)
y <- runif(num_points, min = -1, max = 1)
# 判断点是否在圆内
in_circle <- x^2 + y^2 <= 1
# 计算π的近似值
pi_estimate <- 4 * mean(in_circle)
# 创建数据框用于可视化
data <- data.frame(x = x, y = y, in_circle = in_circle)
# 绘制散点图
library(ggplot2)
ggplot(data, aes(x, y, color = in_circle)) +
geom_point() +
geom_circle(aes(x0 = 0, y0 = 0, r = 1), color = "blue") +
ggtitle("Monte Carlo Simulation for Estimating Pi") +
theme_minimal()
return(pi_estimate)
}
# 设置随机点的数量
num_points <- 100000
# 计算π的近似值
pi_estimate <- monte_carlo_pi(num_points)
# 输出结果
print(paste("Estimated pi:", pi_estimate))
library(ggplot2)
library(ggforce)
# 设置随机数种子，确保结果可重复
set.seed(123)
# 定义函数，计算圆周率π
monte_carlo_pi <- function(num_points) {
# 生成随机点
x <- runif(num_points, min = -1, max = 1)
y <- runif(num_points, min = -1, max = 1)
# 判断点是否在圆内
in_circle <- x^2 + y^2 <= 1
# 计算π的近似值
pi_estimate <- 4 * mean(in_circle)
# 创建数据框用于可视化
data <- data.frame(x = x, y = y, in_circle = in_circle)
# 绘制散点图
ggplot(data, aes(x, y, color = in_circle)) +
geom_point() +
geom_circle(aes(x0 = 0, y0 = 0, r = 1), color = "blue") +
ggtitle("Monte Carlo Simulation for Estimating Pi") +
theme_minimal()
return(pi_estimate)
}
# 设置随机点的数量
num_points <- 100000
# 计算π的近似值
pi_estimate <- monte_carlo_pi(num_points)
# 输出结果
print(paste("Estimated pi:", pi_estimate))
paste("Today is", date())
# 大写转换
toupper("abc")
# 小写转换
tolower("ABC")
rep(1:3, 2)
# 示例：数据处理难题的一套解决方案
options(digits = 2)
student <- c("John Davis", "Angela Williams", "Bullwinkle Moose",
"David Jones", "Janice markhammer", "Cheryl Cushing",
"Reuven Ytzrhak", "Greg Knox", "Joel England", "Mary Rayburn")
Math <- c(123, 233, 345, 456, 567, 356, 744, 334, 893, 246)
Science <- c(90, 93, 76, 98, 67, 87, 85, 86, 46, 86)
English <- c(23, 35, 64, 57, 34, 46, 65, 56, 86, 31)
roster <- data.frame(student, Math, Science, English, stringsAsFactors = T)
roster
# 计算综合得分
z <- scale(roster[, 2:4])
z
score <- apply(z, 1, mean)
roster <- cbind(roster, score)
roster
# 示例：数据处理难题的一套解决方案
options(digits = 2)
roster
options(digits = 2)
student <- c("John Davis", "Angela Williams", "Bullwinkle Moose",
"David Jones", "Janice markhammer", "Cheryl Cushing",
"Reuven Ytzrhak", "Greg Knox", "Joel England", "Mary Rayburn")
Math <- c(123, 233, 345, 456, 567, 356, 744, 334, 893, 246)
Science <- c(90, 93, 76, 98, 67, 87, 85, 86, 46, 86)
English <- c(23, 35, 64, 57, 34, 46, 65, 56, 86, 31)
roster <- data.frame(student, Math, Science, English, stringsAsFactors = T)
roster
# 计算综合得分
z <- scale(roster[, 2:4])
z
score <- apply(z, 1, mean)
roster <- cbind(roster, score)
roster
round(roster$score, digits = 2)
roster
fix(roster)
y <- quantile(score, c(.8, .6, .4, .2))
grade[score < y[4]] <- "E"
fix(roster)
roster <- within(roster, {
grade[score >= y[1]] <- "A"
grade[score < y[1] & score >= y[2]] <- "B"
grade[score < y[2] & score >= y[3]] <- "C"
grade[score < y[3] & score >= y[4]] <- "D"
grade[score < y[4]] <- "E"
})
fix(roster)
fix(roster)
roster$grade[score >= y[1]] <- "A"
roster$grade[score < y[1] & score >= y[2]] <- "B"
roster$grade[score < y[2] & score >= y[3]] <- "C"
roster$grade[score < y[3] & score >= y[4]] <- "D"
roster$grade[score < y[4]] <- "E"
fix(roster)
name <- strsplit((roster$student), " ")
name <- strsplit((roster$student), "")
name <- strsplit((roster$student), " ")
roster$student
class(roster$student)
roster$student <- as.character(roster$student)
name <- strsplit((roster$student), " ")
View(roster)
Lastname <- sapply(name, "[", 2)
Firstname <- sapply(name, "[", 1)
roster <- cbind(Firstname, Lastname, roster[, -1])
# 查看数据框
View(roster)
# 根据姓氏和名字排序
roster <- roster[order(Lastname, Firstname), ]
# 查看数据框
View(roster)
for (i in 1:10)
print("Hello world!")
i <- 10
while (i > 0) {
print("Hello!");i <- i - 1
}
if (is.character(grade)) grade <- as.factor(grade)
options(digits = 2)
student <- c("John Davis", "Angela Williams", "Bullwinkle Moose",
"David Jones", "Janice markhammer", "Cheryl Cushing",
"Reuven Ytzrhak", "Greg Knox", "Joel England", "Mary Rayburn")
Math <- c(123, 233, 345, 456, 567, 356, 744, 334, 893, 246)
Science <- c(90, 93, 76, 98, 67, 87, 85, 86, 46, 86)
English <- c(23, 35, 64, 57, 34, 46, 65, 56, 86, 31)
roster <- data.frame(student, Math, Science, English, stringsAsFactors = T)
roster
# 计算综合得分
z <- scale(roster[, 2:4])
z
score <- apply(z, 1, mean)
roster <- cbind(roster, score)
roster
round(roster$score, digits = 2)
fix(roster)
y <- quantile(score, c(.8, .6, .4, .2))
roster$grade[score >= y[1]] <- "A"
roster$grade[score < y[1] & score >= y[2]] <- "B"
roster$grade[score < y[2] & score >= y[3]] <- "C"
roster$grade[score < y[3] & score >= y[4]] <- "D"
roster$grade[score < y[4]] <- "E"
name <- strsplit((roster$student), " ")
if (is.character(grade)) grade <- as.factor(grade)
mystats <- function(x, parametric=T, print=F)
# mystats: 一个描述性统计量计算函数
mystats <- function(x, parametric=T, print=F){
if (parametric){
center <- mean(x); spread <- sd(x)
} else {
center <- median(x); spread <- mad(x)
}
if (print & parametric) {
cat("Meidan=", center, "\n", "MAD=", spread, "\n")
}
result <- list(center=center, spread=spread)
return(result)
}
set.seed(1234)
x <- rnorm(500)
y <- mystats(x)
y <- mystats(x, parametric = F, print = T)
y
# 转置
cars <- mtcars[1:5, 1:4]
cars
t(cars)
# 整合数据
options(digits = 3)
attach(mtcars)
aggdata <- aggregate(mtcars, by = list(cyl, gear), FUN=mean, na.rm=T)
view(aggdata)
View(aggdata)
View(roster)
install.packages("reshape2")
install.packages("reshape2")
library(reshape2)
md <- melt(mydata, id = c("ID", "Time"))
load("D:/R/exercise/data manage/.RData")
md <- melt(mydata, id = c("ID", "Time"))
library(reshape2)
md <- melt(mydata, id = c("ID", "Time"))
# 整合数据
options(digits = 3)
attach(mtcars)
aggdata <- aggregate(mtcars, by = list(cyl, gear), FUN=mean, na.rm=T)
View(aggdata)
View(roster)
setwd("D:/R/exercise/basic graphs")
load("D:/R/exercise/basic graphs/.RData")
# 简单条形图
barplot(counts,
main = "Simple Bar Plot",
xlab = "Improvement",
ylab = "Frequency")
library(vcd)
counts <- table(Arthritis$Improved)
counts
# 简单条形图
barplot(counts,
main = "Simple Bar Plot",
xlab = "Improvement",
ylab = "Frequency")
# 水平条形图
barplot(counts,
main = "Horizontal Bar Plot",
xlab = "Frequency", ylab = "Improvement", horiz = T)
# 堆砌条形图和分组条形图
counts <- table(Arthritis$Improved, Arthritis$Treatment)
counts
barplot(counts,
main = "Stacked Bar Plot",
xlab = "Treatment", ylab = "Frequency",
col = c("red", "yellow", "green"),
legend = rownames(counts))
barplot(counts,
main = "Stacked Bar Plot",
xlab = "Treatment", ylab = "Frequency",
col = c("red", "yellow", "green"),
legend = rownames(counts), beside = T)
barplot(counts,
main = "Stacked Bar Plot",
xlab = "Treatment", ylab = "Frequency",
col = c("red", "yellow", "green"),
legend = rownames(counts))
barplot(counts,
main = "Stacked Bar Plot",
xlab = "Treatment", ylab = "Frequency",
col = c("red", "yellow", "green"),
legend = rownames(counts), beside = T) # beside=T便是分组条形图
barplot(counts,
main = "Stacked Bar Plot",
xlab = "Treatment", ylab = "Frequency",
col = c("red", "yellow", "green"),
legend = ("topright",rownames(counts)), beside = T) # beside=T便是分组条形图
legend("topright")
legend("topright", inset = .05)
setwd("D:/R/exercise/statistic analysis")
# 使用summary()计算描述性统计量
myvars <- c("mpg", "hp", "wt")
summary(mtcars[myvars])
setwd("D:/R/exercise/ggplot2")
getwd()
library(ggplot2)
ggplot(data = mpg, aes(x = cty, y = hwy))
b <- ggplot(seals, aes(x = long, y = lat))
b <- ggplot(seals, aes(x = long, y = lat))
b
b <- b + geom_blank()
b
if (!require("pacman")) install.packages("pacman")
p_load(ggplot2, ggthemes, dplyr, readr)
chilean_exports <- "year,product,export,percentage
2006,copper,4335009500,81
2006,others,1016726518,19
2007,copper,9005361914,86
2007,others,1523085299,14
2008,copper,6907056354,80
2008,others,1762684216,20
2009,copper,10529811075,81
2009,others,2464094241,19
2010,copper,14828284450,85
2010,others,2543015596,15
2011,copper,15291679086,82
2011,others,3447972354,18
2012,copper,14630686732,80
2012,others,3583968218,20
2013,copper,15244038840,79
2013,others,4051281128,21
2014,copper,14703374241,78
2014,others,4251484600,22
2015,copper,13155922363,78
2015,others,3667286912,22
"
exports_data <- read_csv(chilean_exports)
p1 <- ggplot(aes(y = export, x = year, colour = product), data = exports_data) +
geom_line()
p1
# 调整线条宽度
p1 <- ggplot(aes(y = export, x = year, colour = product), data = exports_data) +
geom_line(size = 1.5)
p1
load("D:/R/exercise/ggplot2/.RData")
p1
getwd()
# 改变变量显示方式
exports_data <- exports_data %>%
mutate(product = factor(product, levels = c("copper","others"),
labels = c("Copper ","Pulp wood, Fruit, Salmon & Others")))
# 改变变量显示方式
exports_data <- exports_data %>%
mutate(product = factor(product, levels = c("copper","others"),
labels = c("Copper ","Pulp wood, Fruit, Salmon & Others")))
if (!require("pacman")) install.packages("pacman")
p_load(ggplot2, ggthemes, dplyr, readr)
# 初画图形
chilean_exports <- "year,product,export,percentage
2006,copper,4335009500,81
2006,others,1016726518,19
2007,copper,9005361914,86
2007,others,1523085299,14
2008,copper,6907056354,80
2008,others,1762684216,20
2009,copper,10529811075,81
2009,others,2464094241,19
2010,copper,14828284450,85
2010,others,2543015596,15
2011,copper,15291679086,82
2011,others,3447972354,18
2012,copper,14630686732,80
2012,others,3583968218,20
2013,copper,15244038840,79
2013,others,4051281128,21
2014,copper,14703374241,78
2014,others,4251484600,22
2015,copper,13155922363,78
2015,others,3667286912,22
"
exports_data <- read_csv(chilean_exports)
p1 <- ggplot(aes(y = export, x = year, colour = product), data = exports_data) +
geom_line()
p1
# 调整线条宽度
p1 <- ggplot(aes(y = export, x = year, colour = product), data = exports_data) +
geom_line(size = 1.5)
p1
# 改变变量显示方式
exports_data <- exports_data %>%
mutate(product = factor(product, levels = c("copper","others"),
labels = c("Copper ","Pulp wood, Fruit, Salmon & Others")))
p1 <- ggplot(aes(y = export, x = year, colour = product),
data = exports_data) +
geom_line(size = 1.5) +
theme(legend.position = "bottom", legend.direction = "horizontal",
legend.title = element_blank())
p1
# 调整X轴坐标间距（scale）
p1 <- p1 + scale_x_continuous(breaks = seq(2006,2015,1))
p1
# 调整坐标轴标签以及添加标题
p1 <- p1 +
labs(title = "Composition of Exports to China ($)",
subtitle = "Source: The Observatory of Economic Complexity") +
labs(x = "Year", y = "USD million")
p1
# 调整颜色画板
colour <- c("#5F9EA0", "#E1B378")
p1 <- p1 + scale_colour_manual(values = colour)
p1
# 使用白色主题
p1 <- ggplot(aes(y = export, x = year, colour = product),
data = exports_data) +
geom_line(size = 1.5) +
scale_x_continuous(breaks = seq(2006,2015,1)) +
labs(title = "Composition of Exports to China ($)",
subtitle = "Source: The Observatory of Economic Complexity") +
labs(x = "Year", y = "USD million") +
scale_colour_manual(values = colour) +
theme_bw() + # 使用theme_bw()函数
theme(legend.position = "bottom",
legend.direction = "horizontal",
legend.title = element_blank())
p1
# 更改字体
install.packages("showtext")
p_load(showtext)
# 安装缺失的包，一次性加载多个包，检查包的版本，从GitHub加载包
font_add("Tahoma","Tahoma.ttf")
font_add("XKCD","xkcd-Regular.otf")
font_add("Roboto Condensed", "RobotoCondensed-Regular.ttf")
font_add("Decima Mono Pro","DecimaMonoPro.otf")
font_add("Atlas Grotesk Regular","AtlasGrotesk-Regular.otf")
font_add("Atlas Grotesk Medium","AtlasGrotesk-Medium.otf")
showtext_auto()
# 创造一张XKCD风格的表格
fill <- c("#40b8d0","#b2d183")
p1 <- ggplot(aes(y = export, x = year, colour = product),
data = exports_data) +
geom_line(size = 1.5) +
scale_x_continuous(breaks = seq(2006,2015,1)) +
labs(title = "Composition of Exports to China ($)",
subtitle = "Source: The Observatory of Economic Complexity") +
labs(x = "Year", y = "USD million") +
scale_fill_manual(values = fill) +
theme(axis.line.x = element_line(size = .5, colour = "black"),
axis.line.y = element_line(size = .5, colour = "black"),
axis.text.x = element_text(colour = "black", size = 10),
axis.text.y = element_text(colour = "black", size = 10),
legend.key = element_rect(fill = "white", colour = "white"),
legend.position = "bottom", legend.direction = "horizontal",
legend.title = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(), panel.border = element_blank(),
panel.background = element_blank(),
plot.title = element_text(family = "XKCD"),
text = element_text(family = "XKCD"))
p1
# 使用经济学人的主题
p1 <- ggplot(aes(y = export, x = year, colour = product),
data = exports_data) +
geom_line(size = 1.5) +
scale_x_continuous(breaks = seq(2006,2015,1)) +
labs(title = "Composition of Exports to China ($)",
subtitle = "Source: The Observatory of Economic Complexity") +
labs(x = "Year", y = "USD million") +
theme_economist() + scale_colour_economist() +
theme(axis.line.x = element_line(size = .5, colour = "black"),
legend.position = "bottom",
legend.direction = "horizontal",
legend.title = element_blank(),
plot.title = element_text(family = "Roboto Condensed"),
text = element_text(family = "Roboto Condensed"))
p1
# 使用“five thirty eight”主题
p1 <- ggplot(aes(y = export, x = year, colour = product),
data = exports_data) +
geom_line(size = 1.5) +
scale_x_continuous(breaks = seq(2006,2015,1)) +
labs(title = "Composition of Exports to China ($)",
subtitle = "Source: The Observatory of Economic Complexity") +
labs(x = "Year", y = "USD million") +
theme_fivethirtyeight() + scale_colour_fivethirtyeight() +
theme(axis.title = element_text(family = "Atlas Grotesk Regular"),
legend.position = "bottom", legend.direction = "horizontal",
legend.title = element_blank(),
plot.title = element_text(family = "Atlas Grotesk Medium"),
legend.text = element_text(family = "Atlas Grotesk Regular"),
text = element_text(family = "Decima Mono Pro"))
p1
colour <- c("#40b8d0", "#b2d183")
p1 <- ggplot(aes(y = export, x = year, colour = product),
data = exports_data) +
geom_line(size = 1.5) +
scale_x_continuous(breaks = seq(2006,2015,1)) +
labs(title = "Composition of Exports to China ($)",
subtitle = "Source: The Observatory of Economic Complexity") +
labs(x = "Year", y = "USD million") +
scale_colour_manual(values = colour) +
theme(panel.border = element_rect(colour = "black", fill = NA, size = .5),
axis.text.x = element_text(colour = "black", size = 10),
axis.text.y = element_text(colour = "black", size = 10),
legend.key = element_rect(fill = "white", colour = "white"),
legend.position = "bottom", legend.direction = "horizontal",
legend.title = element_blank(),
panel.grid.major = element_line(colour = "#d3d3d3"),
panel.grid.minor = element_blank(),
panel.background = element_blank(),
plot.title = element_text(size = 14, family = "Tahoma", face = "bold"),
text = element_text(family = "Tahoma"))
p1
# 在图形中增加标记的点
colour <- c("#40b8d0", "#b2d183")
p1 <- ggplot(aes(y = export, x = year, colour = product),
data = exports_data) +
geom_line(size = 1.5) +
scale_x_continuous(breaks = seq(2006,2015,1)) +
labs(title = "Composition of Exports to China ($)",
subtitle = "Source: The Observatory of Economic Complexity") +
labs(x = "Year", y = "USD million") +
scale_colour_manual(values = colour) +
theme(panel.border = element_rect(colour = "black", fill = NA, size = .5),
axis.text.x = element_text(colour = "black", size = 10),
axis.text.y = element_text(colour = "black", size = 10),
legend.key = element_rect(fill = "white", colour = "white"),
legend.position = "bottom", legend.direction = "horizontal",
legend.title = element_blank(),
panel.grid.major = element_line(colour = "#d3d3d3"),
panel.grid.minor = element_blank(),
panel.background = element_blank(),
plot.title = element_text(size = 14, family = "Tahoma", face = "bold"),
text = element_text(family = "Tahoma"),
legend.key.size = unit(2, 'lines')) +
geom_point(size = 3)
p1
load("D:/R/exercise/ggplot2-line plot/.RData")
