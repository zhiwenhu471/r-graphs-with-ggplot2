columns = c(trim, trsm, mpg_c, hp, trq))))
tab
tab <-
tab %>%
cols_align (# 某些列使用居中对齐
align = "center",
columns = c(mpg_c, hp, trq)
)%>%
tab_style (# 改变字体外观
style = cell_text(size = px(12), color="pink"),
locations = cells_body((
columns = c(trim, trsm, mpg_c, hp, trq))))
tab <- tab %>%
cols_merge(columns = c(mpg_c,mpg_h),
pattern = "{1}c<br>{2}" # html语法添加空格和文字
) %>%
cols_merge(
columns = c(hp, hp_rpm),
pattern = "{1}c<br>{2}"
) %>%
cols_merge(
columns = c(trq, trq_rpm),
pattern = "{1}<br>{2}rpm")%>%
cols_label(mpg_c = "MPG", hp = "HP", trq = "Torque", year = "Year", trim = "Trim",
trsmn = "Transmission", msrp = "MSRP")
gtcars_8 <- gtcars %>% slice_head(n = 2) %>%
ungroup() %>%
filter(ctry_origin != "United Kingdom")
tab <-
tab %>%
cols_align (# 某些列使用居中对齐
align = "center",
columns = c(mpg_c, hp, trq)
)%>%
tab_style (# 改变字体外观
style = cell_text(size = px(12), color="pink"),
locations = cells_body((
columns = c(trim, trsm, mpg_c, hp, trq))))
tab <-
tab %>%
cols_align (# 某些列使用居中对齐
align = "center",
columns = c(mpg_c, hp, trq)
) %>%
tab_style (# 改变字体外观
style = cell_text(size = px(12), color="pink"),
locations = cells_body((
columns = c(trim, trsm, mpg_c, hp, trq))))
library(ggrepel)
library(ggplot2)
ggplot(mtcars, aes(wt, mpg, label = rownames(mtcars))) +
geom_text_repel() +
geom_point(color = 'green') +
theme_classic(base_size = 16)
library(ggrepel)
library(ggplot2)
ggplot(mtcars, aes(wt, mpg, label = rownames(mtcars))) +
geom_text_repel() +
geom_point(color = 'green') +
theme_classic(base_size = 16)
help("ggrepel")
library(ggrepel)
library(ggplot2)
ggplot(mtcars, aes(wt, mpg, label = rownames(mtcars))) +
geom_text_repel() +
geom_point(color = 'green') +
theme_classic(base_size = 16)
library(ggrepel)
library(ggplot2)
ggplot(mtcars, aes(wt, mpg, label = rownames(mtcars))) +
geom_text_repel() +
geom_point(color = 'green') +
theme_classic(base_size = 16)
install.packages("installr")
head(df)
ibrary(ggrepel)
library(ggrepel)
library(ggplot2)
ggplot(mtcars, aes(wt, mpg, label = rownames(mtcars))) +
geom_text_repel() +
geom_point(color = 'green') +
theme_classic(base_size = 16)
ggThemeAssist:::ggThemeAssistAddin()
ggThemeAssist:::ggThemeAssistAddin()
ggThemeAssist:::ggThemeAssistAddin()
install.packages("devtools")
devtools::install_github("dreamsRs/esquisse")
devtools::install_github("dreamRs/esquisse")
.libPaths()
esquisse:::esquisser()
gg_color_hue <- function(n) {hues = seq(15, 375, length = n + 1); hcl(h = hues, l = 65, c = 100)[1:n]}
gg_color_hue <- function(n) {hues = seq(15, 375, length = n + 1);
hcl(h = hues, l = 65, c = 100)[1:n]}
gg_color_hue
install.packages("RColorBrewer")
Pkg.add("ColorBrewer")
install.packages("wesanderson")
library(cachem)
detach("package:cachem", unload = TRUE)
install.packages("viridis")
install.packages("ymlthis")
ymlthis:::launch_yaml_addin()
install.packages("cowplot")
install.packages("tidyHeatmap")
library(tidyHeatmap)
library(tidyHeatmap)
help(package = "ggplot2")
library(vcd)
install.packages("vcd")
install.packages("vcd")
install.packages("vcd")
install.packages(vcd)
install.packages("vcd")
install.packages("vcd")
install.packages("vcd")
install.packages("vcd")
library(httr2)
detach("package:httr2", unload = TRUE)
install.packages("ggplot2")
1 + 1
max(1，4，5，6，8)
max(1, 2, 3, 4, 5, 6, 7)
max(1,2,3,4,5,6,8) - min(3,4,5,6)
print("Hello world!")
str("hello world")
.libPaths()
install.packages("animation")
library("animation")
buffon.needle(nmax = 500, interval = 0)
a <- 3
install.packages("installr")
library("installr")
updateR()
updateR()
library(animation)
clt.ani(FUN = f)
f = function(n) rchisq(n,5)
clt.ani(FUN = f)
detach("package:animation", unload = TRUE)
?mtcars
mtcars
head(mtcars)
names(mtcars)
head(mtcars, 10)
data.entry(mtcars)
x <- c(10, 2, 2, 3, 4, 5, 6)
x
data.entry(x)
edit(x)
x
newx <- edit(x)
newx
stem(mpg)
attach(mtcars)
mpg
stem(mpg)
hist(mpg)
boxplot(mpg)
mean(mpg)
IQR(mpg)
quantile(mpg)
summary(mpg)
sd(mpg)
mad(mpg)
plot(cyl, mpg)
plot(hp, mpg, pch = cyl)
zm()
install.packages("zoom")
library(zoom)
plot(1:100)
zm()
zm()
q()
while (i <= 5) {
print(1:i)
i = i + 1
}
while (i <= 5) {
print(1:i)
i = i + 1
}
i <- 1
i <- 1
while (i <= 5) {
print(1:i)
i = i + 1
}
set.seed(20240724)
Ca125_1 <- c(rnorm(10,80,20),rnorm(20,50,10))
# 30个人的Ca125值如下
Ca125_1
outcome <- c(rep(c("肿瘤","非肿瘤"),c(10,20)))
outcome <- factor(outcome, levels = c("肿瘤","非肿瘤"))
outcome
df <- data.frame(outcome=outcome, Ca125=Ca125_1)
psych::headTail(df)
df
ggThemeAssist:::ggThemeAssistAddin()
citation()
setwd("D:/R/exercise/ggplot2-bar plot")
getwd()
axis.text.x = element_text(colour = "black", size = 10),
# basic graph
if (!require("pacman")) install.packages("pacman")
p_load(ggplot2, ggthemes, dplyr, readr, scales, forcats)
chilean_exports <- "year,product,export,percentage
2006,copper,4335009500,81
2006,others,1016726518,19
2007,copper,9005361914,86
2007,others,1523085299,14
2008,copper,6907056354,80
2008,others,1762684216,20
2009,copper,10529811075,81
2009,others,2464094241,19
2010,copper,14828284450,85
2010,others,2543015596,15
2011,copper,15291679086,82
2011,others,3447972354,18
2012,copper,14630686732,80
2012,others,3583968218,20
2013,copper,15244038840,79
2013,others,4051281128,21
2014,copper,14703374241,78
2014,others,4251484600,22
2015,copper,13155922363,78
2015,others,3667286912,22
"
exports_data <- read_csv(chilean_exports)
p3 <- ggplot(aes(y = export, x = year, fill = product), data = exports_data) +
geom_col()
p3
p3 <- ggplot(aes(y = export, x = year, fill = fct_rev(product)), data = exports_data) +
geom_col()
p3
# Adding data labels
exports_data <- exports_data %>%
mutate(export_label = paste(round(export/1000000000,2), "B"))
p3 = p3 + geom_text(data = exports_data, aes(x = year, y = export,
label = export_label), size = 3)
p3
# Adjusting data labels position
p3 <- ggplot(aes(y = export, x = year, fill = fct_rev(product)), data = exports_data) +
geom_col()
p3 <- p3 +
geom_text(aes(label = export_label), position = position_stack(vjust = 0.5),
size = 3)
p3
# Adjusting legend position
p3 <- p3 + theme(legend.position = "bottom", legend.direction = "horizontal",
legend.title = element_blank())
p3
# Changing variables display
exports_data <- exports_data %>%
mutate(product = factor(product, levels = c("copper","others"),
labels = c("Copper ","Pulp wood, Fruit, Salmon & Others")))
p3 <- ggplot(aes(y = export, x = year, fill = fct_rev(product)), data = exports_data) +
geom_col() +
geom_text(aes(label = export_label), position = position_stack(vjust = 0.5),
size = 3, show.legend = F) +
theme(legend.position = "bottom", legend.direction = "horizontal",
legend.title = element_blank()) +
guides(fill = guide_legend(reverse = T))
p3
# Adjusting x-axis scale
# Adjusting x-axis scale
p3 <- p3 + scale_x_continuous(breaks = seq(2006,2015,1))
p3
# Adjusting axis labels & adding title
p3 <- p3 +
labs(title = "Composition of Exports to China ($)",
subtitle = "Source: The Observatory of Economic Complexity") +
labs(x = "Year", y = "USD million")
p3
# Adjusting color palette
fill <- c("#E1B378","#5F9EA0")
p3 <- p3 + scale_fill_manual(values = fill)
p3
# Using the white theme
p3 <- ggplot(aes(y = export, x = year, fill = fct_rev(product)), data = exports_data) +
geom_col() +
geom_text(aes(label = export_label), position = position_stack(vjust = 0.5),
size = 3, show.legend = F) +
scale_x_continuous(breaks = seq(2006,2015,1)) +
labs(title = "Composition of Exports to China ($)",
subtitle = "Source: The Observatory of Economic Complexity") +
labs(x = "Year", y = "USD million") +
scale_fill_manual(values = fill) +
theme_bw() +
theme(legend.position = "bottom",
legend.direction = "horizontal",
legend.title = element_blank()) +
guides(fill = guide_legend(reverse = T))
p3
# Using ‘The Economist’ theme
fill <- c("#00a3dc","#01526d")
p3 <- ggplot(aes(y = export, x = year, fill = fct_rev(product)), data = exports_data) +
geom_col() +
geom_text(aes(label = export_label), position = position_stack(vjust = 0.5),
colour = "white", size = 3, family = "Roboto Condensed",
show.legend = F) +
scale_x_continuous(breaks = seq(2006,2015,1)) +
labs(title = "Composition of Exports to China ($)",
subtitle = "Source: The Observatory of Economic Complexity") +
labs(x = "Year", y = "USD million") +
theme_economist() + scale_fill_manual(values = fill) +
theme(axis.line.x = element_line(size = .5, colour = "black"),
legend.position = "bottom",
legend.direction = "horizontal",
legend.title = element_blank(),
plot.title = element_text(family = "Roboto Condensed"),
text = element_text(family = "Roboto Condensed")) +
guides(fill = guide_legend(reverse = T))
p3
# Using ‘Five Thirty Eight’ theme
fill <- c("#f80a1c","#338cd3")
p3 <- ggplot(aes(y = export, x = year, fill = fct_rev(product)), data = exports_data) +
geom_col() +
geom_text(aes(label = export_label), position = position_stack(vjust = 0.5),
colour = "white", size = 2.5, family = "Decima Mono Pro",
show.legend = F) +
scale_x_continuous(breaks = seq(2006,2015,1)) +
labs(title = "Composition of Exports to China ($)",
subtitle = "Source: The Observatory of Economic Complexity") +
labs(x = "Year", y = "USD million") +
theme_fivethirtyeight() + scale_fill_manual(values = fill) +
theme(axis.title = element_text(family = "Atlas Grotesk Regular"),
legend.position = "bottom", legend.direction = "horizontal",
legend.title = element_blank(),
plot.title = element_text(family = "Atlas Grotesk Medium"),
legend.text = element_text(family = "Atlas Grotesk Regular"),
text = element_text(family = "Decima Mono Pro")) +
guides(fill = guide_legend(reverse = T))
p3
# Creating my own theme
fill <- c("#b2d183","#40b8d0")
p3 <- ggplot(aes(y = export, x = year, fill = fct_rev(product)), data = exports_data) +
geom_col() +
geom_text(aes(label = export_label), position = position_stack(vjust = 0.5),
colour = "black", family = "Tahoma", size = 3, show.legend = F) +
scale_x_continuous(breaks = seq(2006,2015,1)) +
labs(title = "Composition of Exports to China ($)",
subtitle = "Source: The Observatory of Economic Complexity") +
labs(x = "Year", y = "USD million") +
scale_fill_manual(values = fill) +
theme(panel.border = element_rect(colour = "black", fill = NA, size = .5),
axis.text.x = element_text(colour = "black", size = 10),
axis.text.y = element_text(colour = "black", size = 10),
legend.key = element_rect(fill = "white", colour = "white"),
legend.position = "bottom", legend.direction = "horizontal",
legend.title = element_blank(),
panel.grid.major = element_line(colour = "#d3d3d3"),
panel.grid.minor = element_blank(),
panel.background = element_blank(),
plot.title = element_text(size = 14, family = "Tahoma", face = "bold"),
text = element_text(family = "Tahoma")) +
guides(fill = guide_legend(reverse = T))
p3
getwd()
# basic graph
if (!require("pacman")) install.packages("pacman")
p_load(ggplot2, ggthemes, dplyr, readr, scales, forcats)
chilean_exports <- "year,product,export,percentage
2006,copper,4335009500,81
2006,others,1016726518,19
2007,copper,9005361914,86
2007,others,1523085299,14
2008,copper,6907056354,80
2008,others,1762684216,20
2009,copper,10529811075,81
2009,others,2464094241,19
2010,copper,14828284450,85
2010,others,2543015596,15
2011,copper,15291679086,82
2011,others,3447972354,18
2012,copper,14630686732,80
2012,others,3583968218,20
2013,copper,15244038840,79
2013,others,4051281128,21
2014,copper,14703374241,78
2014,others,4251484600,22
2015,copper,13155922363,78
2015,others,3667286912,22
"
exports_data <- read_csv(chilean_exports)
p3 <- ggplot(aes(y = export, x = year, fill = product), data = exports_data) +
geom_col()
p3
p3 <- ggplot(aes(y = export, x = year, fill = fct_rev(product)), data = exports_data) +
geom_col()
p3
# Adding data labels
exports_data <- exports_data %>%
mutate(export_label = paste(round(export/1000000000,2), "B"))
p3 = p3 + geom_text(data = exports_data, aes(x = year, y = export,
label = export_label), size = 3)
p3
# Adjusting data labels position
p3 <- ggplot(aes(y = export, x = year, fill = fct_rev(product)), data = exports_data) +
geom_col()
p3 <- p3 +
geom_text(aes(label = export_label), position = position_stack(vjust = 0.5),
size = 3)
p3
# Adjusting legend position
p3 <- p3 + theme(legend.position = "bottom", legend.direction = "horizontal",
legend.title = element_blank())
p3
# Changing variables display
exports_data <- exports_data %>%
mutate(product = factor(product, levels = c("copper","others"),
labels = c("Copper ","Pulp wood, Fruit, Salmon & Others")))
p3 <- ggplot(aes(y = export, x = year, fill = fct_rev(product)), data = exports_data) +
geom_col() +
geom_text(aes(label = export_label), position = position_stack(vjust = 0.5),
size = 3, show.legend = F) +
theme(legend.position = "bottom", legend.direction = "horizontal",
legend.title = element_blank()) +
guides(fill = guide_legend(reverse = T))
p3
# Adjusting x-axis scale
p3 <- p3 + scale_x_continuous(breaks = seq(2006,2015,1))
p3
# Adjusting axis labels & adding title
p3 <- p3 +
labs(title = "Composition of Exports to China ($)",
subtitle = "Source: The Observatory of Economic Complexity") +
labs(x = "Year", y = "USD million")
p3
# Adjusting color palette
fill <- c("#E1B378","#5F9EA0")
p3 <- p3 + scale_fill_manual(values = fill)
p3
# Using the white theme
p3 <- ggplot(aes(y = export, x = year, fill = fct_rev(product)), data = exports_data) +
geom_col() +
geom_text(aes(label = export_label), position = position_stack(vjust = 0.5),
size = 3, show.legend = F) +
scale_x_continuous(breaks = seq(2006,2015,1)) +
labs(title = "Composition of Exports to China ($)",
subtitle = "Source: The Observatory of Economic Complexity") +
labs(x = "Year", y = "USD million") +
scale_fill_manual(values = fill) +
theme_bw() +
theme(legend.position = "bottom",
legend.direction = "horizontal",
legend.title = element_blank()) +
guides(fill = guide_legend(reverse = T))
p3
# Using ‘The Economist’ theme
fill <- c("#00a3dc","#01526d")
p3 <- ggplot(aes(y = export, x = year, fill = fct_rev(product)), data = exports_data) +
geom_col() +
geom_text(aes(label = export_label), position = position_stack(vjust = 0.5),
colour = "white", size = 3, family = "Roboto Condensed",
show.legend = F) +
scale_x_continuous(breaks = seq(2006,2015,1)) +
labs(title = "Composition of Exports to China ($)",
subtitle = "Source: The Observatory of Economic Complexity") +
labs(x = "Year", y = "USD million") +
theme_economist() + scale_fill_manual(values = fill) +
theme(axis.line.x = element_line(size = .5, colour = "black"),
legend.position = "bottom",
legend.direction = "horizontal",
legend.title = element_blank(),
plot.title = element_text(family = "Roboto Condensed"),
text = element_text(family = "Roboto Condensed")) +
guides(fill = guide_legend(reverse = T))
p3
# Using ‘Five Thirty Eight’ theme
fill <- c("#f80a1c","#338cd3")
p3 <- ggplot(aes(y = export, x = year, fill = fct_rev(product)), data = exports_data) +
geom_col() +
geom_text(aes(label = export_label), position = position_stack(vjust = 0.5),
colour = "white", size = 2.5, family = "Decima Mono Pro",
show.legend = F) +
scale_x_continuous(breaks = seq(2006,2015,1)) +
labs(title = "Composition of Exports to China ($)",
subtitle = "Source: The Observatory of Economic Complexity") +
labs(x = "Year", y = "USD million") +
theme_fivethirtyeight() + scale_fill_manual(values = fill) +
theme(axis.title = element_text(family = "Atlas Grotesk Regular"),
legend.position = "bottom", legend.direction = "horizontal",
legend.title = element_blank(),
plot.title = element_text(family = "Atlas Grotesk Medium"),
legend.text = element_text(family = "Atlas Grotesk Regular"),
text = element_text(family = "Decima Mono Pro")) +
guides(fill = guide_legend(reverse = T))
p3
# Creating my own theme
fill <- c("#b2d183","#40b8d0")
p3 <- ggplot(aes(y = export, x = year, fill = fct_rev(product)), data = exports_data) +
geom_col() +
geom_text(aes(label = export_label), position = position_stack(vjust = 0.5),
colour = "black", family = "Tahoma", size = 3, show.legend = F) +
scale_x_continuous(breaks = seq(2006,2015,1)) +
labs(title = "Composition of Exports to China ($)",
subtitle = "Source: The Observatory of Economic Complexity") +
labs(x = "Year", y = "USD million") +
scale_fill_manual(values = fill) +
theme(panel.border = element_rect(colour = "black", fill = NA, size = .5),
axis.text.x = element_text(colour = "black", size = 10),
axis.text.y = element_text(colour = "black", size = 10),
legend.key = element_rect(fill = "white", colour = "white"),
legend.position = "bottom", legend.direction = "horizontal",
legend.title = element_blank(),
panel.grid.major = element_line(colour = "#d3d3d3"),
panel.grid.minor = element_blank(),
panel.background = element_blank(),
plot.title = element_text(size = 14, family = "Tahoma", face = "bold"),
text = element_text(family = "Tahoma")) +
guides(fill = guide_legend(reverse = T))
p3
